<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>nArray 前端数据管理工具</title>
		<script src="./narray-0.5.js"></script>
		<!-- // <script src="./narray.min.js"></script> -->
		<script src="./data/l2.js"></script>
	</head>
	<body>
		<script>

			var names = [
				{
					id: 1,
					text: '人人为我,我为人人.',
					name: {
						en: 'Dumas pere',
						zh: '大仲马'
					}
				},
				{
					id: 2,
					text: '手中的一只鸟胜于林中的两只鸟.',
					name: {
						en: 'Heywood',
						zh: '希伍德'
					}
				},
				{
					id: 3,
					text: '易得者亦易失.',
					country: '[美]',
					name: {
						en: 'Hazlitt',
						zh: '赫斯特'
					}
				},
				{
					id: 4,
					text: '时间就是金钱.',
					country: '[美]',
					name: {
						en: 'Benjamin Franklin',
						zh: '富兰克林 '
					}
				},
				{
					id: 5,
					text: '伟大的人物总是愿意当小人物的.',
					name: {
						en: 'R. W. Emerson',
						zh: '爱默生'
					}
				},
				{
					id: 0,
					text: '伟大的人物总是愿意当小人物的.',
					name: {
						en: 'R. W. Emerson',
						zh: '爱默生'
					}
				}
			];

			// 测试：深度查询（$path属性）
			var a1 = [
					{
						b1: {
							c1: {
								d1: {
									e1: {
										f1: 'afasdqw',
										f2: '1231',
										f3: '999999999',
										f4: 11,
										f5: 'a'
									}
								},
								d2: 'a',
								d3: 'b',
								d4: 'c'
							},
							c2: 'c',
							c3: [1,2,3,4],
							c4: [
								{
									d4: 11,
									d5: 22
								},
								{
									d6: 33
								},
								{
									d7: [111,222,333]
								},
								{
									d8: 'a',
									d9: ['b', 'c']
								}
							]
						},
						b2: '111',
						b3: 1
					}
				];

			// 测试：详细查询、严格详细查询
			var t04_1 = [{name: null, sn: 't01'}, {name: undefined, sn: 't02'}, {name: 1, sn: 't03'}, {name: '1', sn: 't04'}, {name: true, sn: 't05'}, {name: false, sn: 't06'}, {name: '', sn: 't07'} ];



			// 测试（test02）：特殊字符、不同类型值的快速（字符串）查询
			var t2 = [ {k:0, v:'aaa'},{k:1, v:'bbbb'}, {k:2, v: ''}, {k:2, v: null}, {k:'2', v: undefined}, {k:3, v: true}, {k:'3', v: 'true'} ];

			// t2.$get();		->	获取所有含空置的对象数据

			// t2.$search();	=>	t2.$search('*') 	=>	获取全部对象数据集合

			// t2.$get({});

			// t2.$get(2);

			// t2.$get(true);

			function test () {

				var t3 = [];

				// 指定数据集
				for ( var j=0; j<1000; j++ ) {
					t3.push({
						value :j
					});
				}

				// -----------------------------------------
				// goTime(function(){
				// 	for ( var i=0; i<t3.length; i++ ) {
				// 		t3[i].value = Math.random();
				// 	}
				// }, '原生 for');

				// -----------------------------------------
				// goTime(function(){
				// 	function useFor ( datas, callback ) {
				// 		for ( var i=0; i<datas.length; i++ )
				// 			if ( callback( datas[i], i ) )
				// 				break;
				// 	}
				// 	useFor(t3, function( data, i ){
				// 		data.value = Math.random();
				// 	});
				// }, '封装 for');

				// -----------------------------------------
				// goTime(function(){
				// 	t3.map(function( data, index ){
				// 		data.value = Math.random();
				// 	});
				// }, '原生 map');

				// -----------------------------------------
				// goTime(function(){
				// 	console.log(t3.$search('value=*').length);//.$update({ value: 0 });
				// }, 'nArray');

				// -----------------------------------------
				// goTime(function(){
				// 	console.log(tt1 = [t1].$search('monitoring_status=1') );//.$update({ value: 0 });
				// }, 'nArray');

				// -----------------------------------------
				// goTime(function(){
				// 	console.log(names.$search('马') );//.$update({ value: 0 });
				// }, 'nArray');

				// -----------------------------------------
				// goTime(function(){
				// 	console.log([l2].$search('monitoring_status=1'));//.$update({ value: 0 });
				// }, 'nArray');

				// -----------------------------------------
				// console.log(t3);

				// 获取执行时长
				function goTime( callback, msg ){
					console.log('-----------------', msg || '')
					var start = new Date().getTime();
					callback();
					var end = new Date().getTime();
					console.log('用时ms:' + ( end - start ));
				}

			}

			test();

		</script>
	</body>
</html>