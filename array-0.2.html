<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>nArray - 0.1</title>
		<script src="./narray-0.1.js"></script>
	</head>
	<body>
		<script>

			var figures = [1, 2, 2, 3, 3, 3, 4, 4, 5],
			    names = [
					{
						id: 1,
						name: 'Sunny',
						alias: '莎妮'
					},
					{
						id: 2,
						name: 'Mary',
						alias: '玛丽',
					},
					{
						id: 3,
						name: 'Crystal',
						alias: '克里丝塔',
						remark: '冰雪聪明的'
					},
					{
						id: 4,
						name: 'Cindy',
						alias: '辛迪',
						remark: '甜美'
					},
					{
						id: 5,
						name: 'Betty',
						alias: '贝蒂'
					}
			    ];


				var a1 = [
						{
							b1: {
								c1: {
									d1: {
										e1: {
											f1: 'afasdqw',
											f2: '1231',
											f3: '999999999',
											f4: 11,
											f5: 'a'
										}
									},
									d2: 'a',
									d3: 'b',
									d4: 'c'
								},
								c2: 'c',
								c3: [1,2,3,4],
								c4: [
									{
										d4: 11,
										d5: 22
									},
									{
										d6: 33
									},
									{
										d7: [111,222,333]
									},
									{
										d8: 'a',
										d9: ['b', 'c']
									}
								]
							},
							b2: '111',
							b3: 1
						}
					];


			    /*



				figures.$get('>3');	// -> [4, 4, 5]

				figures.$get('!=3');	// -> [1, 2, 2, 4, 4, 5]


				// 以下几种 $get 获取的数据一样
				names.$get('1, 2, 5');
				// -> [
				//		{id: 1, name: 'Sunny', alias: '莎妮'},
				//		{id: 2, name: 'Mary', alias: '玛丽', }, 
				//		{id: 5, name: 'Betty', alias: '贝蒂'}
				// 	]

				names.$get('id=1, id=2, id=5');	// 效果同上

				names.$get('id=1|2|5');			// 效果同上

				names.$get('id<3, id>4');		// 效果同上

				// 传入数组查询
				var ids = [1, 2, 5];
				names.$get('id=' + ids.join('|'));		// 效果同上





				// 以下几种 $search 获取的数据一样
				names.$search('c');
				// -> [
				//		{id: 3, name: 'Crystal', alias: '克里丝塔', remark: '冰雪聪明的'}, 
				//		{id: 4, name: 'Cindy', alias: '辛迪', remark: '甜美'},
				// 	]

				names.$search('name=c');	// 效果同上

				names.$search('remark=');	// 效果同上，只查询有 remark 值的数据





				// 只输出 name 和 alias 两个值
				names.$fetch('name, alias');
				// -> [
				//		{"name":"Sunny","alias":"莎妮"},
				//		{"name":"Mary","alias":"玛丽"},
				//		{"name":"Crystal","alias":"克里丝塔"},
				//		{"name":"Cindy","alias":"辛迪"},
				//		{"name":"Betty","alias":"贝蒂"}
				//	]




				// names.$get('id=1|5').$update({ name: 'Zara', alias: '赞拉' });
				// -> [
				//		{id: 1, name: 'Zara', alias: '赞拉'},
				//		{id: 5, name: 'Zara', alias: '赞拉'}
				// 	]




				var ss = [
						{
							id: 1,
							name: 'a',
							alias: {
								first: ['hello', ''],
								last: {

								}
							}
						}
					];




				function be () {

				}

				function is (datas, params, store, paths ) {
					var result = [],
						i;

					if ( !paths )
						paths = [];

					for ( var i=0; i<paths.length; i++ )
						result.push(paths[i]);

					if ( datas.constructor == Object ) {
						result.push(datas);
						for ( i in datas ) {							
							if ( is(datas[i], params, store, result) )
								break;
						}
					}
					else if ( datas.constructor == Array ) {
						result.push(datas);
						for ( i=0; i<datas.length; i++ ) {							
							if ( is(datas[i], params, store, result) )
								break;
						}
					}
					else if ( datas == params ) {
						store.push(result[result.length-1]);

						if ( store.constructor.prototype.$path )
							store.constructor.prototype.$path = []

						store.constructor.prototype.$path.push(result);
					}
				}
				
				var store = [];
				is(a1, [
						{
							key: '',
							val: 'c',
							mode: '='
						}
					], store)
				console.log(store);

				*/


				

		</script>
	</body>
</html>