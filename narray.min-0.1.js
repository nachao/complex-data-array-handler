function nArray(a,b){return window==this?new nArray(a,b):void 0}nArray.fn=nArray.prototype={version:"0.1"},nArray.extend=nArray.fn.extend=function(a,b){b||(b=a,a=this);for(var c in b)a[c]=b[c];return a},nArray.extend({trim:function(a){return"string"==typeof a?a.replace(/^\s+|\s+$/g,""):a},toKeys:function(a){var c,b=[];if(a&&"object"==typeof a)for(c in a)b.push(c);return b},resolve:function(a){var d,e,f,g,b,c,h;if("undefined"==typeof a)return[];for(b=["<=",">=","<",">","!=","="],c=[],a=a?a.toString().split(","):[],f=0;f<a.length;f++){for(d="=",e=a[f],g=0;g<b.length;g++)if(e.indexOf(b[g])>=0){d=b[g];break}e=e.split(d),h={key:nArray.trim(e[0]),val:nArray.trim(e[1]),mode:d},1==e.length&&(h.key=null,h.val=nArray.trim(e[0])),c.push(h)}return c},mateMethod:function(a,b,c){var d=!1,e=c.val,f=b.toString(),g=Number(b),h=Number(e);return(b.constructor==Object||b.constructor==Array)&&(f=JSON.stringify(b)),"="==c.mode?d="full"==a?f===e:f.indexOf(e)>=0:"!="==c.mode?d="full"==a?f!==e:f.indexOf(e)<0:g&&h&&(">"==c.mode?d=g>h:">="==c.mode?d=g>=h:"<"==c.mode?d=h>g:"<="==c.mode&&(d=h>=g)),d},mateData:function(a,b,c){var f,g,h,i,j,d=!1,e=c.length;for(i=0;e>i;i++)if(f=c[i],g=c[i].key,h=c[i].val,g){if(b[g]&&(d=nArray.mateMethod(a,b[g],f)))break}else if(h)if(b.constructor==Array)for(j=0;j<b.length&&!(d=nArray.mateMethod(a,b[j],f));j++);else if(b.constructor==Object){for(j in b)if(d=nArray.mateMethod(a,b[j],f))break}else if(d=nArray.mateMethod(a,b,f))break;return d},mateFor:function(a,b,c){var e,d=[];for(c=nArray.resolve(c),e=0;e<b.length;e++)nArray.mateData(a,b[e],c)&&d.push(b[e]);return d},mateFull:function(a,b){return b?nArray.mateFor("full",a,b):a},mateFuzzy:function(a,b){return b?nArray.mateFor("fuzzy",a,b):a}}),Array.prototype.$grep=function(a){return nArray.mateFull(this,a)},Array.prototype.$search=function(a){return nArray.mateFuzzy(this,a)},Array.prototype.$fetch=function(a){var d,e,f,b=[],c=[];for(a=a?a.split(","):[],e=0;e<a.length;e++)c.push(nArray.trim(a[e]));if(c.length)for(e=0;e<this.length;e++){for(d={},f=0;f<c.length;f++)nArray.toKeys(this[e]).indexOf(c[f])>=0&&(d[c[f]]=this[e][c[f]]);nArray.toKeys(d).length&&b.push(d)}else b=this;return b},Array.prototype.$update=function(a){var b,c;if("undefined"!=typeof a)for(b=0;b<this.length;b++)if(this[b].constructor==a.constructor)if("object"==typeof a)for(c in a)this[b][c]=a[c];else this[b]=a;return this},Array.prototype.$unique=function(){var b,a=[];for(b=0;b<this.length;b++)a.indexOf(this[b])<0&&a.push(this[b]);return a};