function nArray(a,b){return window==this?new nArray(a,b):void 0}nArray.fn=nArray.prototype={version:"0.1"},nArray.extend=nArray.fn.extend=function(a,b){b||(b=a,a=this);for(var c in b)a[c]=b[c];return a},nArray.extend({trim:function(a){return"string"==typeof a?a.replace(/^\s+|\s+$/g,""):a},toKeys:function(a){var c,b=[];if(a&&"object"==typeof a)for(c in a)b.push(c);return b},toArray:function(a,b){var d,c=[];if(a){for(d in a)"string"==typeof b&&(a[d][b]=d),c.push(a[d]);return c}},toObject:function(a,b){var d,c={};if(a){for(d=0;d<a.length;d++)"string"==typeof b&&a[d][b]?c[a[d][b]]=a[d]:c[d]=a[d];return c}},resolve:function(a){if("string"!=typeof a)return[];var d,e,f,g,h,i,j,l,b=["<=",">=","<",">","!=","="],c=[];for(a=a.toString().split(","),j=0;j<a.length;j++){for(e="=",f=a[j],l=0;l<b.length;l++)if(f.indexOf(b[l])>=0){e=b[l];break}if(f=f.split(e),f.length>1?(h=nArray.trim(f[0]),i=nArray.trim(f[1])):(h=null,i=nArray.trim(f[0])),i.indexOf("|")>=0)for(g=i.split("|"),d=[],k=0;k<g.length;k++)d.push({key:h,val:nArray.trim(g[k]),mode:e});else d={key:h,val:i,mode:e};d.constructor==Array?c=c.concat(d):c.push(d)}return c},mateMethod:function(a,b,c){var d=!1,e=c.val.toLocaleLowerCase(),f=b.toString().toLocaleLowerCase(),g=Number(b),h=Number(e);return(b.constructor==Object||b.constructor==Array)&&(f=JSON.stringify(b)),"="==c.mode?d="full"==a?f===e:f.indexOf(e)>=0:"!="==c.mode?d="full"==a?f!==e:f.indexOf(e)<0:g&&h&&(">"==c.mode?d=g>h:">="==c.mode?d=g>=h:"<"==c.mode?d=h>g:"<="==c.mode&&(d=h>=g)),d},mateData:function(a,b,c,d){var h,i,j,k,l,e=!1,f=c.length,g=0;for(k=0;f>k;k++){if(h=c[k],i=c[k].key,j=c[k].val,i)b[i]&&(e=nArray.mateMethod(a,b[i],h));else if(j)if(b.constructor==Array)for(l=0;l<b.length&&!(e=nArray.mateMethod(a,b[l],h));l++);else if(b.constructor==Object){for(l in b)if(e=nArray.mateMethod(a,b[l],h))break}else e=nArray.mateMethod(a,b,h);if(e){if(!d)break;e=++g==f}}return e},mateFor:function(a,b,c,d){var f,e=[];for(c=nArray.resolve(c),f=0;f<b.length;f++)nArray.mateData(a,b[f],c,d)&&e.push(b[f]);return e},mateFull:function(a,b,c){return b?nArray.mateFor("full",a,b,c):a},mateFuzzy:function(a,b,c){return b?nArray.mateFor("fuzzy",a,b,c):a}}),Array.prototype.$get=function(a,b){return nArray.mateFull(this,a,b)},Array.prototype.$search=function(a,b){return nArray.mateFuzzy(this,a,b)},Array.prototype.$fetch=function(a){var d,e,f,b=[],c=[];for(a=a?a.split(","):[],e=0;e<a.length;e++)c.push(nArray.trim(a[e]));if(c.length)for(e=0;e<this.length;e++){for(d={},f=0;f<c.length;f++)nArray.toKeys(this[e]).indexOf(c[f])>=0&&(d[c[f]]=this[e][c[f]]);nArray.toKeys(d).length&&b.push(d)}else b=this;return b},Array.prototype.$update=function(a){var b,c;if("undefined"!=typeof a)for(b=0;b<this.length;b++)if(this[b].constructor==a.constructor)if("object"==typeof a)for(c in a)this[b][c]=a[c];else this[b]=a;return this},Array.prototype.$unique=function(){var b,a=[];for(b=0;b<this.length;b++)a.indexOf(this[b])<0&&a.push(this[b]);return a};